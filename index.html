<!DOCTYPE html>
<html>
<head>
    <title>1WIN ID Spoofer</title>
    <!-- Подключаем криптографию для генерации hash -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        // Конфигурация
        const TARGET_ID = 7796998065; // Ваш нужный ID
        const TARGET_URL = "https://1win-soft.com/webapp/";

        // 1. Полная подмена объекта Telegram WebApp
        function spoofTelegram() {
            const authDate = Math.floor(Date.now() / 1000);
            const fakeUser = {
                id: TARGET_ID,
                first_name: "User",
                last_name: "Fake",
                username: "fake_user",
                language_code: "en"
            };

            // Генерация "мусорного" hash (если сервер не проверяет подпись)
            const fakeHash = "fake_" + CryptoJS.SHA256(authDate + JSON.stringify(fakeUser)).toString();

            window.Telegram = {
                WebApp: {
                    initData: `auth_date=${authDate}&user=${encodeURIComponent(JSON.stringify(fakeUser))}&hash=${fakeHash}`,
                    initDataUnsafe: {
                        user: fakeUser,
                        auth_date: authDate,
                        hash: fakeHash
                    },
                    ready: () => console.log('Ready'),
                    expand: () => console.log('Expand'),
                    version: "6.7",
                    platform: "web"
                }
            };
        }

        // 2. Глубокий перехват сетевых запросов
        function hijackNetwork() {
            // Перехват fetch
            const originalFetch = window.fetch;
            window.fetch = async (url, options) => {
                if (url.includes('/api/check-access')) {
                    console.log('[Подмена] Перехвачен API запрос');
                    const fakeData = { status: true, user_id: TARGET_ID };
                    return new Response(JSON.stringify(fakeData), {
                        status: 200,
                        headers: { 'Content-Type': 'application/json' }
                    });
                }
                return originalFetch(url, options);
            };

            // Перехват XHR
            const originalXHR = window.XMLHttpRequest.prototype.send;
            window.XMLHttpRequest.prototype.send = function(body) {
                if (this._url.includes('/api/check-access')) {
                    body = body.replace(/"telegramId":\d+/g, `"telegramId":${TARGET_ID}`);
                }
                return originalXHR.call(this, body);
            };
        }

        // 3. Запуск подмены
        function init() {
            spoofTelegram();
            hijackNetwork();
            
            console.log('[Успех] Данные подменены:', {
                id: TARGET_ID,
                initData: window.Telegram.WebApp.initData
            });

            // Перенаправление с задержкой
            setTimeout(() => {
                window.location.href = TARGET_URL;
            }, 2000);
        }

        // Запускаем при полной загрузке страницы
        window.addEventListener('DOMContentLoaded', init);
    </script>
</head>
<body style="font-family: Arial; text-align: center; padding: 50px;">
    <h2>Идет подготовка подмены ID...</h2>
    <p>Пожалуйста, подождите 2 секунды</p>
</body>
</html>
